<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magic Eggs</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .game-container {
            background: white;
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            width: 100%;
            text-align: center;
            position: relative;
        }

        .player-id {
            position: absolute;
            top: 15px;
            left: 15px;
            background: #ffd700;
            padding: 5px 10px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: bold;
            color: #2c3e50;
        }

        .header {
            margin-bottom: 25px;
            margin-top: 10px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .egg-display {
            margin: 25px 0;
            position: relative;
        }

        .egg {
            font-size: 100px;
            margin-bottom: 15px;
            animation: float 3s ease-in-out infinite;
        }

        .egg-type {
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            color: #2c3e50;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-top: 10px;
            display: inline-block;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            position: relative;
        }

        .stat-change {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            margin-top: 5px;
        }

        .food-count {
            background: #27ae60;
            color: white;
            padding: 8px 15px;
            border-radius: 10px;
            margin: 10px 0;
            font-weight: bold;
        }

        .actions-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .btn {
            padding: 18px;
            border: none;
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
        }

        .btn-admin {
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            color: #2c3e50;
            font-weight: bold;
            margin: 15px 0;
            width: 100%;
            padding: 15px;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .menu-section {
            margin-top: 25px;
        }

        .menu-btn {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 18px;
            border: none;
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .menu-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .info-text {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 12px;
            margin-top: 20px;
            font-size: 14px;
            color: #666;
            line-height: 1.4;
        }

        .admin-panel {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            border-radius: 20px;
            padding: 25px;
            margin-top: 20px;
            color: white;
            display: none;
        }

        .admin-panel.active {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .admin-controls {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .admin-input {
            padding: 12px 15px;
            border-radius: 10px;
            border: 2px solid #4a6572;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
        }

        .admin-input::placeholder {
            color: #bdc3c7;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .checkbox-group input {
            width: 20px;
            height: 20px;
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            margin-top: 10px;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background: #27ae60;
            color: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            opacity: 0;
            transform: translateX(100px);
            transition: all 0.3s ease;
        }

        .notification.show {
            opacity: 1;
            transform: translateX(0);
        }

        .admin-header {
            text-align: center;
            margin-bottom: 20px;
            color: #ffd700;
            font-size: 1.3em;
        }

        .shop-modal, .confirm-modal, .inventory-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .shop-modal.active, .confirm-modal.active, .inventory-modal.active {
            display: flex;
        }

        .shop-content, .confirm-content, .inventory-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .shop-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .inventory-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .confirm-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            justify-content: center;
        }

        .dead-egg {
            filter: grayscale(1);
            opacity: 0.7;
        }

        .death-message {
            color: #e74c3c;
            font-weight: bold;
            margin: 10px 0;
        }

        .empty-inventory {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .withdraw-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- Уникальный ID игрока -->
        <div class="player-id">ID: <span id="playerId">123456789</span></div>
        
        <div class="header">
            <h1>🥚 Magic Eggs</h1>
            <div class="egg-display">
                <div class="egg" id="eggDisplay">🐣</div>
                <div class="egg-type" id="eggTypeDisplay">Обычное яйцо</div>
                <div id="deathMessage" class="death-message" style="display: none;">Яйцо умерло! Купите новое</div>
            </div>
        </div>
        
        <div class="food-count" id="foodCount">Еды: 3/3</div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div>Сытость</div>
                <div class="stat-value" id="hungerValue">25/100</div>
                <div class="stat-change" id="hungerChange">-</div>
            </div>
            <div class="stat-card">
                <div>Настроение</div>
                <div class="stat-value" id="moodValue">97/100</div>
                <div class="stat-change" id="moodChange">-</div>
            </div>
            <div class="stat-card">
                <div>Звёзды</div>
                <div class="stat-value" id="starsValue">0</div>
            </div>
            <div class="stat-card">
                <div>Предметы</div>
                <div class="stat-value" id="itemsValue">0</div>
            </div>
        </div>
        
        <div class="actions-grid">
            <button class="btn btn-primary" id="feedBtn" onclick="feedPet()">
                <span>🍎</span>
                Покормить
            </button>
            <button class="btn btn-secondary" id="playBtn" onclick="playWithPet()">
                <span>🎮</span>
                Поиграть
            </button>
        </div>

        <!-- Кнопка админ-панели -->
        <button class="btn btn-admin" id="adminToggle">
            <span>🔧</span>
            Админ Панель
        </button>
        
        <div class="menu-section">
            <button class="menu-btn" onclick="openShop()">
                <span>🛒</span>
                Магазин
            </button>
            <button class="menu-btn" onclick="openInventory()">
                <span>🎒</span>
                Инвентарь
            </button>
        </div>

        <div class="info-text">
            <strong>[🔍] Для покупок нужны Telegram Stars</strong><br>
            Получайте звёзды от друзей или покупайте в Telegram
        </div>

        <!-- Скрытая админ-панель -->
        <div class="admin-panel" id="adminPanel">
            <div class="admin-controls">
                <div class="admin-header">🔧 Админ Панель</div>
                
                <input type="text" class="admin-input" placeholder="ID игрока (например: 123456789)" id="adminPlayerId">
                <input type="number" class="admin-input" placeholder="Количество звёзд" id="adminStars">
                
                <button class="btn btn-admin" id="adminApply">
                    <span>✅</span>
                    Выдать звёзды
                </button>
                <button class="btn btn-danger" id="adminReset">
                    <span>🔄</span>
                    Сбросить прогресс игрока
                </button>
            </div>
        </div>
    </div>

    <!-- Модальное окно магазина -->
    <div class="shop-modal" id="shopModal">
        <div class="shop-content">
            <button class="close-btn" onclick="closeShop()">×</button>
            <h2>🛒 Магазин</h2>
            
            <div class="shop-item">
                <div>
                    <strong>🥚 Золотое яйцо</strong><br>
                    <small>Шансы: Вино 50%, Календарь 25%, Шапка Санты 5%, Конфеты 2%</small>
                </div>
                <button class="btn btn-primary" style="padding: 8px 15px;" onclick="buyItem('gold_egg', 100)">100 ⭐</button>
            </div>
            
            <div class="shop-item">
                <div>
                    <strong>🍎 Еда (3 шт)</strong><br>
                    <small>Пополните запас еды для кормления</small>
                </div>
                <button class="btn btn-primary" style="padding: 8px 15px;" onclick="buyItem('food', 20)">20 ⭐</button>
            </div>
            
            <div class="shop-item">
                <div>
                    <strong>🥚 Обычное яйцо</strong><br>
                    <small>Шансы: Сердечко 40%, Роза 25%, Календарь 5%</small>
                </div>
                <button class="btn btn-primary" style="padding: 8px 15px;" onclick="buyItem('normal_egg', 50)">50 ⭐</button>
            </div>
            
            <div class="info-text" style="margin-top: 20px;">
                Для покупок нужны Telegram Stars. Попросите админа выдать вам звёзды!
            </div>
        </div>
    </div>

    <!-- Модальное окно подтверждения покупки -->
    <div class="confirm-modal" id="confirmModal">
        <div class="confirm-content">
            <h3>Подтверждение покупки</h3>
            <p id="confirmText">Вы уверены, что хотите купить этот предмет?</p>
            <div class="confirm-buttons">
                <button class="btn btn-secondary" onclick="closeConfirm()">Отмена</button>
                <button class="btn btn-primary" id="confirmBuyBtn">Купить</button>
            </div>
        </div>
    </div>

    <!-- Модальное окно инвентаря -->
    <div class="inventory-modal" id="inventoryModal">
        <div class="inventory-content">
            <button class="close-btn" onclick="closeInventory()">×</button>
            <h2>🎒 Инвентарь</h2>
            
            <div id="inventoryItems">
                <!-- Здесь будут отображаться предметы -->
            </div>
        </div>
    </div>
    
    <div class="notification" id="notification">Изменения применены!</div>

    <script>
        // Генерация уникального ID игрока
        function generatePlayerId() {
            if (!localStorage.getItem('playerId')) {
                const id = 'USER_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                localStorage.setItem('playerId', id);
            }
            return localStorage.getItem('playerId');
        }

        // Данные игрока
        let playerData = {
            id: generatePlayerId(),
            hunger: 25,
            mood: 97,
            stars: 0,
            items: [],
            eggType: 'normal',
            foodCount: 3,
            isAlive: true,
            lastFeedDate: new Date().toDateString(),
            lastStatDecrease: Date.now()
        };

        // Загрузка данных из localStorage
        function loadPlayerData() {
            const saved = localStorage.getItem('playerData');
            if (saved) {
                const data = JSON.parse(saved);
                // Проверяем, не нужно ли сбросить счетчик еды на новый день
                const today = new Date().toDateString();
                if (data.lastFeedDate !== today) {
                    data.foodCount = 3;
                    data.lastFeedDate = today;
                }
                playerData = { ...playerData, ...data };
            }
            updateUI();
            startStatDecrease();
        }

        // Сохранение данных в localStorage
        function savePlayerData() {
            localStorage.setItem('playerData', JSON.stringify(playerData));
        }

        // Автоматическое уменьшение показателей
        function startStatDecrease() {
            setInterval(() => {
                if (playerData.isAlive) {
                    const now = Date.now();
                    const timePassed = now - playerData.lastStatDecrease;
                    
                    // Уменьшаем показатели каждые 30 секунд
                    if (timePassed > 30000) {
                        playerData.hunger = Math.max(0, playerData.hunger - 2);
                        playerData.mood = Math.max(0, playerData.mood - 1);
                        playerData.lastStatDecrease = now;
                        savePlayerData();
                        updateUI();
                        
                        // Показываем анимацию изменения
                        showStatChange('hungerChange', '-2');
                        showStatChange('moodChange', '-1');
                    }
                }
            }, 5000); // Проверяем каждые 5 секунд
        }

        function showStatChange(elementId, change) {
            const element = document.getElementById(elementId);
            element.textContent = change;
            element.style.display = 'flex';
            
            setTimeout(() => {
                element.style.display = 'none';
            }, 2000);
        }

        // Обновление интерфейса
        function updateUI() {
            document.getElementById('playerId').textContent = playerData.id;
            document.getElementById('hungerValue').textContent = playerData.hunger + '/100';
            document.getElementById('moodValue').textContent = playerData.mood + '/100';
            document.getElementById('starsValue').textContent = playerData.stars;
            document.getElementById('itemsValue').textContent = playerData.items.length;
            document.getElementById('foodCount').textContent = 'Еды: ' + playerData.foodCount + '/3';
            
            const eggDisplay = document.getElementById('eggDisplay');
            const eggTypeDisplay = document.getElementById('eggTypeDisplay');
            const deathMessage = document.getElementById('deathMessage');
            const feedBtn = document.getElementById('feedBtn');
            const playBtn = document.getElementById('playBtn');

            if (!playerData.isAlive) {
                eggDisplay.textContent = '💀';
                eggDisplay.classList.add('dead-egg');
                eggTypeDisplay.style.display = 'none';
                deathMessage.style.display = 'block';
                feedBtn.disabled = true;
                playBtn.disabled = true;
            } else {
                eggDisplay.textContent = playerData.eggType === 'gold' ? '🥚' : '🐣';
                eggDisplay.classList.remove('dead-egg');
                eggTypeDisplay.textContent = playerData.eggType === 'gold' ? 'Золотое яйцо' : 'Обычное яйцо';
                eggTypeDisplay.style.display = 'inline-block';
                deathMessage.style.display = 'none';
                feedBtn.disabled = playerData.foodCount <= 0;
                playBtn.disabled = playerData.mood >= 100; // Отключаем если настроение максимальное
            }

            // Проверка смерти
            if ((playerData.hunger <= 0 || playerData.mood <= 0) && playerData.isAlive) {
                playerData.isAlive = false;
                savePlayerData();
                showNotification('Ваше яйцо умерло от голода или грусти!');
            }
        }

        // Система выпадения предметов
        const dropSystem = {
            normal: [
                { item: '❤️ Сердечко', chance: 40 },
                { item: '🌹 Роза', chance: 25 },
                { item: '📅 Календарь', chance: 5 },
                { item: 'Ничего', chance: 30 }
            ],
            gold: [
                { item: '🍷 Вино', chance: 50 },
                { item: '📅 Календарь', chance: 25 },
                { item: '🎅 Шапка Санты', chance: 5 },
                { item: '🎁 Коробка конфет', chance: 2 },
                { item: 'Ничего', chance: 18 }
            ]
        };

        function getRandomItem(eggType) {
            const items = dropSystem[eggType];
            const random = Math.random() * 100;
            let currentChance = 0;

            for (const item of items) {
                currentChance += item.chance;
                if (random < currentChance) {
                    return item.item;
                }
            }
            return 'Ничего';
        }

        // Функции питомца
        function feedPet() {
            if (!playerData.isAlive) {
                showNotification('Яйцо умерло! Купите новое в магазине');
                return;
            }

            if (playerData.foodCount <= 0) {
                showNotification('Закончилась еда! Купите в магазине');
                return;
            }

            playerData.foodCount--;
            playerData.hunger = Math.min(100, playerData.hunger + 25);
            
            const item = getRandomItem(playerData.eggType);
            if (item !== 'Ничего') {
                playerData.items.push(item);
                showNotification('Питомец покормлен! Выпало: ' + item);
            } else {
                showNotification('Питомец покормлен! Ничего не выпало');
            }
            
            savePlayerData();
            updateUI();
        }

        function playWithPet() {
            if (!playerData.isAlive) {
                showNotification('Яйцо умерло! Купите новое в магазине');
                return;
            }

            if (playerData.mood >= 100) {
                showNotification('Настроение питомца уже максимальное!');
                return;
            }

            playerData.mood = Math.min(100, playerData.mood + 15);
            playerData.hunger = Math.max(0, playerData.hunger - 10);
            savePlayerData();
            updateUI();
            showNotification('Вы поиграли с питомцем! 🎮');
        }

        // Функции магазина
        let currentItemToBuy = null;

        function openShop() {
            document.getElementById('shopModal').classList.add('active');
        }

        function closeShop() {
            document.getElementById('shopModal').classList.remove('active');
        }

        function buyItem(itemType, cost) {
            currentItemToBuy = { type: itemType, cost: cost };
            
            let itemName = '';
            switch(itemType) {
                case 'gold_egg': itemName = 'Золотое яйцо'; break;
                case 'food': itemName = 'Еда (3 шт)'; break;
                case 'normal_egg': itemName = 'Обычное яйцо'; break;
            }
            
            document.getElementById('confirmText').textContent = `Вы уверены, что хотите купить ${itemName} за ${cost} звёзд?`;
            document.getElementById('confirmModal').classList.add('active');
        }

        function confirmPurchase() {
            if (!currentItemToBuy) return;

            if (playerData.stars < currentItemToBuy.cost) {
                showNotification('Недостаточно звёзд!');
                closeConfirm();
                return;
            }

            playerData.stars -= currentItemToBuy.cost;

            switch(currentItemToBuy.type) {
                case 'gold_egg':
                    playerData.eggType = 'gold';
                    showNotification('Теперь у вас золотое яйцо! Новые шансы: Вино 50%, Календарь 25%, Шапка Санты 5%, Конфеты 2%');
                    break;
                case 'food':
                    playerData.foodCount = 3;
                    showNotification('Запас еды пополнен!');
                    break;
                case 'normal_egg':
                    playerData.isAlive = true;
                    playerData.hunger = 50;
                    playerData.mood = 50;
                    playerData.eggType = 'normal';
                    showNotification('Новое яйцо куплено!');
                    break;
            }

            savePlayerData();
            updateUI();
            closeConfirm();
            closeShop();
        }

        function closeConfirm() {
            document.getElementById('confirmModal').classList.remove('active');
            currentItemToBuy = null;
        }

        // Функции инвентаря
        function openInventory() {
            const inventoryItems = document.getElementById('inventoryItems');
            
            if (playerData.items.length === 0) {
                inventoryItems.innerHTML = `
                    <div class="empty-inventory">
                        <h3>📦 Инвентарь пуст</h3>
                        <p>Покормите питомца, чтобы получить предметы!</p>
                    </div>
                `;
            } else {
                let itemsHTML = '';
                playerData.items.forEach((item, index) => {
                    itemsHTML += `
                        <div class="inventory-item">
                            <span>${item}</span>
                            <button class="withdraw-btn" onclick="withdrawItem(${index})">Вывод</button>
                        </div>
                    `;
                });
                inventoryItems.innerHTML = itemsHTML;
            }
            
            document.getElementById('inventoryModal').classList.add('active');
        }

        function closeInventory() {
            document.getElementById('inventoryModal').classList.remove('active');
        }

        function withdrawItem(index) {
            const item = playerData.items[index];
            if (confirm(`Вывести предмет "${item}"?`)) {
                playerData.items.splice(index, 1);
                savePlayerData();
                updateUI();
                openInventory(); // Обновляем инвентарь
                showNotification(`Предмет "${item}" выведен!`);
            }
        }

        // Обработчики событий
        document.getElementById('confirmBuyBtn').addEventListener('click', confirmPurchase);

        // Функция для показа уведомления
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Админ-панель
        document.getElementById('adminToggle').addEventListener('click', function() {
            const adminPanel = document.getElementById('adminPanel');
            adminPanel.classList.toggle('active');
            
            if (adminPanel.classList.contains('active')) {
                this.innerHTML = '<span>🔧</span> Скрыть Админ Панель';
            } else {
                this.innerHTML = '<span>🔧</span> Админ Панель';
            }
        });

        document.getElementById('adminApply').addEventListener('click', function() {
            const playerIdInput = document.getElementById('adminPlayerId').value;
            const starsInput = document.getElementById('adminStars').value;

            if (!playerIdInput || !starsInput) {
                showNotification('Заполните ID игрока и количество звёзд!');
                return;
            }

            // В реальном приложении здесь был бы запрос к серверу
            // Для демонстрации просто выдаем звезды текущему игроку
            playerData.stars += parseInt(starsInput);
            savePlayerData();
            updateUI();
            
            showNotification(`Выдано ${starsInput} звёзд игроку ${playerIdInput}`);
            
            // Очищаем поля
            document.getElementById('adminPlayerId').value = '';
            document.getElementById('adminStars').value = '';
        });

        document.getElementById('adminReset').addEventListener('click', function() {
            const playerIdInput = document.getElementById('adminPlayerId').value;
            
            if (!playerIdInput) {
                showNotification('Введите ID игрока для сброса!');
                return;
            }

            if(confirm(`Сбросить прогресс игрока ${playerIdInput}?`)) {
                // Сбрасываем прогресс текущего игрока для демонстрации
                playerData.hunger = 25;
                playerData.mood = 97;
                playerData.stars = 0;
                playerData.items = [];
                playerData.eggType = 'normal';
                playerData.foodCount = 3;
                playerData.isAlive = true;
                
                savePlayerData();
                updateUI();
                showNotification(`Прогресс игрока ${playerIdInput} сброшен!`);
                
                // Очищаем поле
                document.getElementById('adminPlayerId').value = '';
            }
        });

        // Закрытие модальных окон при клике вне их
        document.getElementById('shopModal').addEventListener('click', function(e) {
            if (e.target === this) closeShop();
        });

        document.getElementById('confirmModal').addEventListener('click', function(e) {
            if (e.target === this) closeConfirm();
        });

        document.getElementById('inventoryModal').addEventListener('click', function(e) {
            if (e.target === this) closeInventory();
        });

        // Инициализация
        loadPlayerData();
    </script>
</body>
</html>
