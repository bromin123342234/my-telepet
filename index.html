<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TelePet - –≠–≤–æ–ª—é—Ü–∏—è</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 400px;
            margin: 0 auto;
            text-align: center;
        }
        
        .pet-container {
            margin: 20px 0;
            position: relative;
        }
        
        .pet {
            width: 150px;
            height: 150px;
            margin: 0 auto;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            border: 5px solid gold;
            transition: all 0.3s;
        }
        
        .egg { background: #f8f8f8; }
        .leon { background: #ff6b6b; }
        .rappy { background: #4ecdc4; }
        .brady { background: #45b7d1; }
        
        .stats {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 15px;
            margin: 15px 0;
            backdrop-filter: blur(10px);
        }
        
        .stat-item {
            margin: 8px 0;
            font-size: 16px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.3);
            border-radius: 4px;
            margin: 5px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: #FFD700;
            transition: width 0.5s;
        }
        
        .actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }
        
        button {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            border: none;
            padding: 15px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            color: #333;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
        }
        
        .shop-btn {
            background: linear-gradient(45deg, #FF6B6B, #FF8E53);
            grid-column: span 2;
        }
        
        .timer {
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 10px;
            margin: 10px 0;
            font-size: 14px;
        }
        
        .hidden {
            display: none;
        }
        
        .rare-badge {
            background: gold;
            color: black;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 12px;
            margin-left: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üê£ TelePet Evolution</h1>
        
        <div class="pet-container">
            <div id="pet" class="pet egg">ü•ö</div>
            <div id="timer" class="timer hidden">
                –î–æ –≤—ã–ª—É–ø–ª–µ–Ω–∏—è: <span id="countdown">72:00:00</span>
            </div>
        </div>
        
        <div class="stats">
            <div class="stat-item">
                üçñ –°—ã—Ç–æ—Å—Ç—å: 
                <div class="progress-bar">
                    <div id="hunger-bar" class="progress-fill" style="width: 50%;"></div>
                </div>
                <span id="hunger">50</span>/100
            </div>
            
            <div class="stat-item">
                üòä –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ: 
                <div class="progress-bar">
                    <div id="mood-bar" class="progress-fill" style="width: 50%;"></div>
                </div>
                <span id="mood">50</span>/100
            </div>
            
            <div class="stat-item">
                ‚≠ê –£—Ä–æ–≤–µ–Ω—å: <span id="level">1</span>
            </div>
            
            <div class="stat-item">
                üí∞ –ó–≤—ë–∑–¥—ã: <span id="stars">0</span>
            </div>
        </div>
        
        <div class="actions">
            <button onclick="feed()">üçñ –ü–æ–∫–æ—Ä–º–∏—Ç—å</button>
            <button onclick="play()">üéæ –ü–æ–∏–≥—Ä–∞—Ç—å</button>
            <button onclick="openShop()" class="shop-btn">‚≠ê –ú–∞–≥–∞–∑–∏–Ω</button>
        </div>
        
        <div id="shop" class="hidden">
            <div class="stats">
                <h3>üõçÔ∏è –ú–∞–≥–∞–∑–∏–Ω</h3>
                <button onclick="buyItem('food')">üçó –í–∫—É—Å–Ω—è—à–∫–∞ (10 ‚≠ê)</button>
                <button onclick="buyItem('toy')">üß∏ –ò–≥—Ä—É—à–∫–∞ (20 ‚≠ê)</button>
                <button onclick="closeShop()">‚ùå –ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
        
        <div id="evolution" class="hidden">
            <div class="stats">
                <h3>üéâ –≠–≤–æ–ª—é—Ü–∏—è!</h3>
                <p id="evolution-text"></p>
                <button onclick="closeEvolution()">üéä –£—Ä–∞!</button>
            </div>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –ø–∏—Ç–æ–º—Ü–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
        let pet = {
            hunger: 50,
            mood: 50,
            level: 1,
            stars: 0,
            stage: 'egg', // egg, leon, rappy, brady
            creationTime: Date.now(),
            hatched: false,
            lastAction: Date.now()
        };

        // –®–∞–Ω—Å—ã –Ω–∞ –≤—ã–ª—É–ø–ª–µ–Ω–∏–µ (–≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö)
        const HATCH_CHANCES = {
            'leon': 45,    // 45% - –æ–±—ã—á–Ω—ã–π
            'rappy': 45,   // 45% - –æ–±—ã—á–Ω—ã–π  
            'brady': 10    // 10% - —Ä–µ–¥–∫–∏–π!
        };

        // –í—Ä–µ–º—è –≤—ã–ª—É–ø–ª–µ–Ω–∏—è (3 –¥–Ω—è –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö)
        const HATCH_TIME = 3 * 24 * 60 * 60 * 1000; // 3 –¥–Ω—è

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        function loadSave() {
            const saved = localStorage.getItem('telepet_save');
            if (saved) {
                const savedData = JSON.parse(saved);
                Object.assign(pet, savedData);
            }
            updateDisplay();
            startCountdown();
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
        function saveGame() {
            pet.lastAction = Date.now();
            localStorage.setItem('telepet_save', JSON.stringify(pet));
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        function updateDisplay() {
            document.getElementById('hunger').textContent = pet.hunger;
            document.getElementById('mood').textContent = pet.mood;
            document.getElementById('level').textContent = pet.level;
            document.getElementById('stars').textContent = pet.stars;
            
            document.getElementById('hunger-bar').style.width = pet.hunger + '%';
            document.getElementById('mood-bar').style.width = pet.mood + '%';
            
            updatePetAppearance();
        }

        // –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ –ø–∏—Ç–æ–º—Ü–∞
        function updatePetAppearance() {
            const petElement = document.getElementById('pet');
            const timerElement = document.getElementById('timer');
            
            if (!pet.hatched) {
                petElement.className = 'pet egg';
                petElement.textContent = 'ü•ö';
                timerElement.classList.remove('hidden');
            } else {
                timerElement.classList.add('hidden');
                petElement.className = `pet ${pet.stage}`;
                
                switch(pet.stage) {
                    case 'leon': petElement.textContent = 'ü¶Å'; break;
                    case 'rappy': petElement.textContent = 'üê∞'; break;
                    case 'brady': petElement.textContent = 'üêª'; break;
                }
            }
        }

        // –û–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á—ë—Ç –¥–æ –≤—ã–ª—É–ø–ª–µ–Ω–∏—è
        function startCountdown() {
            if (pet.hatched) return;
            
            const hatchTime = pet.creationTime + HATCH_TIME;
            const now = Date.now();
            
            if (now >= hatchTime) {
                hatchEgg();
            } else {
                updateCountdown();
                setInterval(updateCountdown, 1000);
            }
        }

        function updateCountdown() {
            const hatchTime = pet.creationTime + HATCH_TIME;
            const now = Date.now();
            const timeLeft = hatchTime - now;
            
            if (timeLeft <= 0) {
                hatchEgg();
                return;
            }
            
            const hours = Math.floor(timeLeft / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
            
            document.getElementById('countdown').textContent = 
                `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // –í—ã–ª—É–ø–ª–µ–Ω–∏–µ —è–π—Ü–∞!
        function hatchEgg() {
            pet.hatched = true;
            
            // –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä –ø–∏—Ç–æ–º—Ü–∞ –ø–æ —à–∞–Ω—Å–∞–º
            const random = Math.random() * 100;
            let currentChance = 0;
            let selectedPet = 'leon';
            
            for (const [petType, chance] of Object.entries(HATCH_CHANCES)) {
                currentChance += chance;
                if (random <= currentChance) {
                    selectedPet = petType;
                    break;
                }
            }
            
            pet.stage = selectedPet;
            
            // –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            const evolutionElement = document.getElementById('evolution');
            const evolutionText = document.getElementById('evolution-text');
            
            let message = '';
            switch(selectedPet) {
                case 'leon':
                    message = '–í—ã–ª—É–ø–∏–ª—Å—è –õ–ï–û–ù! ü¶Å';
                    break;
                case 'rappy':
                    message = '–í—ã–ª—É–ø–∏–ª—Å—è –†–≠–ü–ü–ò! üê∞';
                    break;
                case 'brady':
                    message = '–í–´–õ–£–ü–ò–õ–°–Ø –ë–†–≠–ô–î–ò! üêª<span class="rare-badge">–†–ï–î–ö–ò–ô!</span>';
                    pet.stars += 50; // –ë–æ–Ω—É—Å –∑–∞ —Ä–µ–¥–∫–æ–≥–æ
                    break;
            }
            
            evolutionText.innerHTML = message;
            evolutionElement.classList.remove('hidden');
            
            updateDisplay();
            saveGame();
        }

        // –î–µ–π—Å—Ç–≤–∏—è —Å –ø–∏—Ç–æ–º—Ü–µ–º
        function feed() {
            if (pet.hunger < 100) {
                pet.hunger = Math.min(pet.hunger + 10, 100);
                updateDisplay();
                animatePet();
                showMessage('–ü–∏—Ç–æ–º–µ—Ü –ø–æ–∫–æ—Ä–º–ª–µ–Ω! +10 –∫ —Å—ã—Ç–æ—Å—Ç–∏');
                saveGame();
            }
        }

        function play() {
            if (pet.mood < 100) {
                pet.mood = Math.min(pet.mood + 10, 100);
                pet.hunger = Math.max(pet.hunger - 5, 0);
                updateDisplay();
                animatePet();
                showMessage('–ü–∏—Ç–æ–º–µ—Ü –ø–æ–∏–≥—Ä–∞–ª! +10 –∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—é');
                saveGame();
            }
        }

        // –ê–Ω–∏–º–∞—Ü–∏—è
        function animatePet() {
            const petElement = document.getElementById('pet');
            petElement.style.transform = 'scale(1.1)';
            setTimeout(() => {
                petElement.style.transform = 'scale(1)';
            }, 200);
        }

        // –ú–∞–≥–∞–∑–∏–Ω
        function openShop() {
            document.getElementById('shop').classList.remove('hidden');
        }

        function closeShop() {
            document.getElementById('shop').classList.add('hidden');
        }

        function closeEvolution() {
            document.getElementById('evolution').classList.add('hidden');
        }

        function buyItem(item) {
            showMessage('–¢–æ–≤–∞—Ä –∫—É–ø–ª–µ–Ω! –°–∫–æ—Ä–æ –¥–æ–±–∞–≤–∏–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª!');
            closeShop();
        }

        // –°–æ–æ–±—â–µ–Ω–∏—è
        function showMessage(text) {
            alert(text);
        }

        // –ê–≤—Ç–æ-—É–º–µ–Ω—å—à–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
        setInterval(() => {
            if (pet.hunger > 0) pet.hunger -= 1;
            if (pet.mood > 0) pet.mood -= 1;
            updateDisplay();
            saveGame();
        }, 60000); // –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        if (window.Telegram && window.Telegram.WebApp) {
            Telegram.WebApp.expand();
            Telegram.WebApp.ready();
        }
        
        loadSave();
    </script>
</body>
</html>
