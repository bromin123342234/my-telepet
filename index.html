<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magic Eggs</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .game-container {
            background: white;
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            width: 100%;
            text-align: center;
            position: relative;
        }

        .player-id {
            position: absolute;
            top: 15px;
            left: 15px;
            background: #ffd700;
            padding: 5px 10px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: bold;
            color: #2c3e50;
        }

        .header {
            margin-bottom: 25px;
            margin-top: 10px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .egg-display {
            margin: 25px 0;
            position: relative;
        }

        .egg {
            font-size: 100px;
            margin-bottom: 15px;
            animation: float 3s ease-in-out infinite;
        }

        .egg-type {
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            color: #2c3e50;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-top: 10px;
            display: inline-block;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            position: relative;
        }

        .stat-change {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            margin-top: 5px;
        }

        .food-count {
            background: #27ae60;
            color: white;
            padding: 8px 15px;
            border-radius: 10px;
            margin: 10px 0;
            font-weight: bold;
        }

        .actions-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .btn {
            padding: 18px;
            border: none;
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
        }

        .btn-admin {
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            color: #2c3e50;
            font-weight: bold;
            margin: 15px 0;
            width: 100%;
            padding: 15px;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .menu-section {
            margin-top: 25px;
        }

        .menu-btn {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 18px;
            border: none;
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .menu-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .info-text {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 12px;
            margin-top: 20px;
            font-size: 14px;
            color: #666;
            line-height: 1.4;
        }

        .admin-panel {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            border-radius: 20px;
            padding: 25px;
            margin-top: 20px;
            color: white;
            display: none;
        }

        .admin-panel.active {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .admin-controls {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .admin-input {
            padding: 12px 15px;
            border-radius: 10px;
            border: 2px solid #4a6572;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
        }

        .admin-input::placeholder {
            color: #bdc3c7;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .checkbox-group input {
            width: 20px;
            height: 20px;
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            margin-top: 10px;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background: #27ae60;
            color: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            opacity: 0;
            transform: translateX(100px);
            transition: all 0.3s ease;
        }

        .notification.show {
            opacity: 1;
            transform: translateX(0);
        }

        .admin-header {
            text-align: center;
            margin-bottom: 20px;
            color: #ffd700;
            font-size: 1.3em;
        }

        .shop-modal, .confirm-modal, .inventory-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .shop-modal.active, .confirm-modal.active, .inventory-modal.active {
            display: flex;
        }

        .shop-content, .confirm-content, .inventory-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .shop-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .inventory-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .confirm-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            justify-content: center;
        }

        .dead-egg {
            filter: grayscale(1);
            opacity: 0.7;
        }

        .death-message {
            color: #e74c3c;
            font-weight: bold;
            margin: 10px 0;
        }

        .empty-inventory {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .withdraw-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∏–≥—Ä–æ–∫–∞ -->
        <div class="player-id">ID: <span id="playerId">123456789</span></div>
        
        <div class="header">
            <h1>ü•ö Magic Eggs</h1>
            <div class="egg-display">
                <div class="egg" id="eggDisplay">üê£</div>
                <div class="egg-type" id="eggTypeDisplay">–û–±—ã—á–Ω–æ–µ —è–π—Ü–æ</div>
                <div id="deathMessage" class="death-message" style="display: none;">–Ø–π—Ü–æ —É–º–µ—Ä–ª–æ! –ö—É–ø–∏—Ç–µ –Ω–æ–≤–æ–µ</div>
            </div>
        </div>
        
        <div class="food-count" id="foodCount">–ï–¥—ã: 3/3</div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div>–°—ã—Ç–æ—Å—Ç—å</div>
                <div class="stat-value" id="hungerValue">25/100</div>
                <div class="stat-change" id="hungerChange">-</div>
            </div>
            <div class="stat-card">
                <div>–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ</div>
                <div class="stat-value" id="moodValue">97/100</div>
                <div class="stat-change" id="moodChange">-</div>
            </div>
            <div class="stat-card">
                <div>–ó–≤—ë–∑–¥—ã</div>
                <div class="stat-value" id="starsValue">0</div>
            </div>
            <div class="stat-card">
                <div>–ü—Ä–µ–¥–º–µ—Ç—ã</div>
                <div class="stat-value" id="itemsValue">0</div>
            </div>
        </div>
        
        <div class="actions-grid">
            <button class="btn btn-primary" id="feedBtn" onclick="feedPet()">
                <span>üçé</span>
                –ü–æ–∫–æ—Ä–º–∏—Ç—å
            </button>
            <button class="btn btn-secondary" id="playBtn" onclick="playWithPet()">
                <span>üéÆ</span>
                –ü–æ–∏–≥—Ä–∞—Ç—å
            </button>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ -->
        <button class="btn btn-admin" id="adminToggle">
            <span>üîß</span>
            –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å
        </button>
        
        <div class="menu-section">
            <button class="menu-btn" onclick="openShop()">
                <span>üõí</span>
                –ú–∞–≥–∞–∑–∏–Ω
            </button>
            <button class="menu-btn" onclick="openInventory()">
                <span>üéí</span>
                –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å
            </button>
        </div>

        <div class="info-text">
            <strong>[üîç] –î–ª—è –ø–æ–∫—É–ø–æ–∫ –Ω—É–∂–Ω—ã Telegram Stars</strong><br>
            –ü–æ–ª—É—á–∞–π—Ç–µ –∑–≤—ë–∑–¥—ã –æ—Ç –¥—Ä—É–∑–µ–π –∏–ª–∏ –ø–æ–∫—É–ø–∞–π—Ç–µ –≤ Telegram
        </div>

        <!-- –°–∫—Ä—ã—Ç–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å -->
        <div class="admin-panel" id="adminPanel">
            <div class="admin-controls">
                <div class="admin-header">üîß –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å</div>
                
                <input type="text" class="admin-input" placeholder="ID –∏–≥—Ä–æ–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 123456789)" id="adminPlayerId">
                <input type="number" class="admin-input" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤—ë–∑–¥" id="adminStars">
                
                <button class="btn btn-admin" id="adminApply">
                    <span>‚úÖ</span>
                    –í—ã–¥–∞—Ç—å –∑–≤—ë–∑–¥—ã
                </button>
                <button class="btn btn-danger" id="adminReset">
                    <span>üîÑ</span>
                    –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∏–≥—Ä–æ–∫–∞
                </button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –º–∞–≥–∞–∑–∏–Ω–∞ -->
    <div class="shop-modal" id="shopModal">
        <div class="shop-content">
            <button class="close-btn" onclick="closeShop()">√ó</button>
            <h2>üõí –ú–∞–≥–∞–∑–∏–Ω</h2>
            
            <div class="shop-item">
                <div>
                    <strong>ü•ö –ó–æ–ª–æ—Ç–æ–µ —è–π—Ü–æ</strong><br>
                    <small>–®–∞–Ω—Å—ã: –í–∏–Ω–æ 50%, –ö–∞–ª–µ–Ω–¥–∞—Ä—å 25%, –®–∞–ø–∫–∞ –°–∞–Ω—Ç—ã 5%, –ö–æ–Ω—Ñ–µ—Ç—ã 2%</small>
                </div>
                <button class="btn btn-primary" style="padding: 8px 15px;" onclick="buyItem('gold_egg', 100)">100 ‚≠ê</button>
            </div>
            
            <div class="shop-item">
                <div>
                    <strong>üçé –ï–¥–∞ (3 —à—Ç)</strong><br>
                    <small>–ü–æ–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø–∞—Å –µ–¥—ã –¥–ª—è –∫–æ—Ä–º–ª–µ–Ω–∏—è</small>
                </div>
                <button class="btn btn-primary" style="padding: 8px 15px;" onclick="buyItem('food', 20)">20 ‚≠ê</button>
            </div>
            
            <div class="shop-item">
                <div>
                    <strong>ü•ö –û–±—ã—á–Ω–æ–µ —è–π—Ü–æ</strong><br>
                    <small>–®–∞–Ω—Å—ã: –°–µ—Ä–¥–µ—á–∫–æ 40%, –†–æ–∑–∞ 25%, –ö–∞–ª–µ–Ω–¥–∞—Ä—å 5%</small>
                </div>
                <button class="btn btn-primary" style="padding: 8px 15px;" onclick="buyItem('normal_egg', 50)">50 ‚≠ê</button>
            </div>
            
            <div class="info-text" style="margin-top: 20px;">
                –î–ª—è –ø–æ–∫—É–ø–æ–∫ –Ω—É–∂–Ω—ã Telegram Stars. –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –∞–¥–º–∏–Ω–∞ –≤—ã–¥–∞—Ç—å –≤–∞–º –∑–≤—ë–∑–¥—ã!
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–∫—É–ø–∫–∏ -->
    <div class="confirm-modal" id="confirmModal">
        <div class="confirm-content">
            <h3>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–∫—É–ø–∫–∏</h3>
            <p id="confirmText">–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å —ç—Ç–æ—Ç –ø—Ä–µ–¥–º–µ—Ç?</p>
            <div class="confirm-buttons">
                <button class="btn btn-secondary" onclick="closeConfirm()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" id="confirmBuyBtn">–ö—É–ø–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è -->
    <div class="inventory-modal" id="inventoryModal">
        <div class="inventory-content">
            <button class="close-btn" onclick="closeInventory()">√ó</button>
            <h2>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
            
            <div id="inventoryItems">
                <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø—Ä–µ–¥–º–µ—Ç—ã -->
            </div>
        </div>
    </div>
    
    <div class="notification" id="notification">–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã!</div>

    <script>
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ ID –∏–≥—Ä–æ–∫–∞
        function generatePlayerId() {
            if (!localStorage.getItem('playerId')) {
                const id = 'USER_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                localStorage.setItem('playerId', id);
            }
            return localStorage.getItem('playerId');
        }

        // –î–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞
        let playerData = {
            id: generatePlayerId(),
            hunger: 25,
            mood: 97,
            stars: 0,
            items: [],
            eggType: 'normal',
            foodCount: 3,
            isAlive: true,
            lastFeedDate: new Date().toDateString(),
            lastStatDecrease: Date.now()
        };

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage
        function loadPlayerData() {
            const saved = localStorage.getItem('playerData');
            if (saved) {
                const data = JSON.parse(saved);
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –Ω—É–∂–Ω–æ –ª–∏ —Å–±—Ä–æ—Å–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ –µ–¥—ã –Ω–∞ –Ω–æ–≤—ã–π –¥–µ–Ω—å
                const today = new Date().toDateString();
                if (data.lastFeedDate !== today) {
                    data.foodCount = 3;
                    data.lastFeedDate = today;
                }
                playerData = { ...playerData, ...data };
            }
            updateUI();
            startStatDecrease();
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ localStorage
        function savePlayerData() {
            localStorage.setItem('playerData', JSON.stringify(playerData));
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–º–µ–Ω—å—à–µ–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
        function startStatDecrease() {
            setInterval(() => {
                if (playerData.isAlive) {
                    const now = Date.now();
                    const timePassed = now - playerData.lastStatDecrease;
                    
                    // –£–º–µ–Ω—å—à–∞–µ–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
                    if (timePassed > 30000) {
                        playerData.hunger = Math.max(0, playerData.hunger - 2);
                        playerData.mood = Math.max(0, playerData.mood - 1);
                        playerData.lastStatDecrease = now;
                        savePlayerData();
                        updateUI();
                        
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏—è
                        showStatChange('hungerChange', '-2');
                        showStatChange('moodChange', '-1');
                    }
                }
            }, 5000); // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
        }

        function showStatChange(elementId, change) {
            const element = document.getElementById(elementId);
            element.textContent = change;
            element.style.display = 'flex';
            
            setTimeout(() => {
                element.style.display = 'none';
            }, 2000);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            document.getElementById('playerId').textContent = playerData.id;
            document.getElementById('hungerValue').textContent = playerData.hunger + '/100';
            document.getElementById('moodValue').textContent = playerData.mood + '/100';
            document.getElementById('starsValue').textContent = playerData.stars;
            document.getElementById('itemsValue').textContent = playerData.items.length;
            document.getElementById('foodCount').textContent = '–ï–¥—ã: ' + playerData.foodCount + '/3';
            
            const eggDisplay = document.getElementById('eggDisplay');
            const eggTypeDisplay = document.getElementById('eggTypeDisplay');
            const deathMessage = document.getElementById('deathMessage');
            const feedBtn = document.getElementById('feedBtn');
            const playBtn = document.getElementById('playBtn');

            if (!playerData.isAlive) {
                eggDisplay.textContent = 'üíÄ';
                eggDisplay.classList.add('dead-egg');
                eggTypeDisplay.style.display = 'none';
                deathMessage.style.display = 'block';
                feedBtn.disabled = true;
                playBtn.disabled = true;
            } else {
                eggDisplay.textContent = playerData.eggType === 'gold' ? 'ü•ö' : 'üê£';
                eggDisplay.classList.remove('dead-egg');
                eggTypeDisplay.textContent = playerData.eggType === 'gold' ? '–ó–æ–ª–æ—Ç–æ–µ —è–π—Ü–æ' : '–û–±—ã—á–Ω–æ–µ —è–π—Ü–æ';
                eggTypeDisplay.style.display = 'inline-block';
                deathMessage.style.display = 'none';
                feedBtn.disabled = playerData.foodCount <= 0;
                playBtn.disabled = playerData.mood >= 100; // –û—Ç–∫–ª—é—á–∞–µ–º –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–º–µ—Ä—Ç–∏
            if ((playerData.hunger <= 0 || playerData.mood <= 0) && playerData.isAlive) {
                playerData.isAlive = false;
                savePlayerData();
                showNotification('–í–∞—à–µ —è–π—Ü–æ —É–º–µ—Ä–ª–æ –æ—Ç –≥–æ–ª–æ–¥–∞ –∏–ª–∏ –≥—Ä—É—Å—Ç–∏!');
            }
        }

        // –°–∏—Å—Ç–µ–º–∞ –≤—ã–ø–∞–¥–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤
        const dropSystem = {
            normal: [
                { item: '‚ù§Ô∏è –°–µ—Ä–¥–µ—á–∫–æ', chance: 40 },
                { item: 'üåπ –†–æ–∑–∞', chance: 25 },
                { item: 'üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å', chance: 5 },
                { item: '–ù–∏—á–µ–≥–æ', chance: 30 }
            ],
            gold: [
                { item: 'üç∑ –í–∏–Ω–æ', chance: 50 },
                { item: 'üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å', chance: 25 },
                { item: 'üéÖ –®–∞–ø–∫–∞ –°–∞–Ω—Ç—ã', chance: 5 },
                { item: 'üéÅ –ö–æ—Ä–æ–±–∫–∞ –∫–æ–Ω—Ñ–µ—Ç', chance: 2 },
                { item: '–ù–∏—á–µ–≥–æ', chance: 18 }
            ]
        };

        function getRandomItem(eggType) {
            const items = dropSystem[eggType];
            const random = Math.random() * 100;
            let currentChance = 0;

            for (const item of items) {
                currentChance += item.chance;
                if (random < currentChance) {
                    return item.item;
                }
            }
            return '–ù–∏—á–µ–≥–æ';
        }

        // –§—É–Ω–∫—Ü–∏–∏ –ø–∏—Ç–æ–º—Ü–∞
        function feedPet() {
            if (!playerData.isAlive) {
                showNotification('–Ø–π—Ü–æ —É–º–µ—Ä–ª–æ! –ö—É–ø–∏—Ç–µ –Ω–æ–≤–æ–µ –≤ –º–∞–≥–∞–∑–∏–Ω–µ');
                return;
            }

            if (playerData.foodCount <= 0) {
                showNotification('–ó–∞–∫–æ–Ω—á–∏–ª–∞—Å—å –µ–¥–∞! –ö—É–ø–∏—Ç–µ –≤ –º–∞–≥–∞–∑–∏–Ω–µ');
                return;
            }

            playerData.foodCount--;
            playerData.hunger = Math.min(100, playerData.hunger + 25);
            
            const item = getRandomItem(playerData.eggType);
            if (item !== '–ù–∏—á–µ–≥–æ') {
                playerData.items.push(item);
                showNotification('–ü–∏—Ç–æ–º–µ—Ü –ø–æ–∫–æ—Ä–º–ª–µ–Ω! –í—ã–ø–∞–ª–æ: ' + item);
            } else {
                showNotification('–ü–∏—Ç–æ–º–µ—Ü –ø–æ–∫–æ—Ä–º–ª–µ–Ω! –ù–∏—á–µ–≥–æ –Ω–µ –≤—ã–ø–∞–ª–æ');
            }
            
            savePlayerData();
            updateUI();
        }

        function playWithPet() {
            if (!playerData.isAlive) {
                showNotification('–Ø–π—Ü–æ —É–º–µ—Ä–ª–æ! –ö—É–ø–∏—Ç–µ –Ω–æ–≤–æ–µ –≤ –º–∞–≥–∞–∑–∏–Ω–µ');
                return;
            }

            if (playerData.mood >= 100) {
                showNotification('–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–∞ —É–∂–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ!');
                return;
            }

            playerData.mood = Math.min(100, playerData.mood + 15);
            playerData.hunger = Math.max(0, playerData.hunger - 10);
            savePlayerData();
            updateUI();
            showNotification('–í—ã –ø–æ–∏–≥—Ä–∞–ª–∏ —Å –ø–∏—Ç–æ–º—Ü–µ–º! üéÆ');
        }

        // –§—É–Ω–∫—Ü–∏–∏ –º–∞–≥–∞–∑–∏–Ω–∞
        let currentItemToBuy = null;

        function openShop() {
            document.getElementById('shopModal').classList.add('active');
        }

        function closeShop() {
            document.getElementById('shopModal').classList.remove('active');
        }

        function buyItem(itemType, cost) {
            currentItemToBuy = { type: itemType, cost: cost };
            
            let itemName = '';
            switch(itemType) {
                case 'gold_egg': itemName = '–ó–æ–ª–æ—Ç–æ–µ —è–π—Ü–æ'; break;
                case 'food': itemName = '–ï–¥–∞ (3 —à—Ç)'; break;
                case 'normal_egg': itemName = '–û–±—ã—á–Ω–æ–µ —è–π—Ü–æ'; break;
            }
            
            document.getElementById('confirmText').textContent = `–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å ${itemName} –∑–∞ ${cost} –∑–≤—ë–∑–¥?`;
            document.getElementById('confirmModal').classList.add('active');
        }

        function confirmPurchase() {
            if (!currentItemToBuy) return;

            if (playerData.stars < currentItemToBuy.cost) {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–≤—ë–∑–¥!');
                closeConfirm();
                return;
            }

            playerData.stars -= currentItemToBuy.cost;

            switch(currentItemToBuy.type) {
                case 'gold_egg':
                    playerData.eggType = 'gold';
                    showNotification('–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –∑–æ–ª–æ—Ç–æ–µ —è–π—Ü–æ! –ù–æ–≤—ã–µ —à–∞–Ω—Å—ã: –í–∏–Ω–æ 50%, –ö–∞–ª–µ–Ω–¥–∞—Ä—å 25%, –®–∞–ø–∫–∞ –°–∞–Ω—Ç—ã 5%, –ö–æ–Ω—Ñ–µ—Ç—ã 2%');
                    break;
                case 'food':
                    playerData.foodCount = 3;
                    showNotification('–ó–∞–ø–∞—Å –µ–¥—ã –ø–æ–ø–æ–ª–Ω–µ–Ω!');
                    break;
                case 'normal_egg':
                    playerData.isAlive = true;
                    playerData.hunger = 50;
                    playerData.mood = 50;
                    playerData.eggType = 'normal';
                    showNotification('–ù–æ–≤–æ–µ —è–π—Ü–æ –∫—É–ø–ª–µ–Ω–æ!');
                    break;
            }

            savePlayerData();
            updateUI();
            closeConfirm();
            closeShop();
        }

        function closeConfirm() {
            document.getElementById('confirmModal').classList.remove('active');
            currentItemToBuy = null;
        }

        // –§—É–Ω–∫—Ü–∏–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
        function openInventory() {
            const inventoryItems = document.getElementById('inventoryItems');
            
            if (playerData.items.length === 0) {
                inventoryItems.innerHTML = `
                    <div class="empty-inventory">
                        <h3>üì¶ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç</h3>
                        <p>–ü–æ–∫–æ—Ä–º–∏—Ç–µ –ø–∏—Ç–æ–º—Ü–∞, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã!</p>
                    </div>
                `;
            } else {
                let itemsHTML = '';
                playerData.items.forEach((item, index) => {
                    itemsHTML += `
                        <div class="inventory-item">
                            <span>${item}</span>
                            <button class="withdraw-btn" onclick="withdrawItem(${index})">–í—ã–≤–æ–¥</button>
                        </div>
                    `;
                });
                inventoryItems.innerHTML = itemsHTML;
            }
            
            document.getElementById('inventoryModal').classList.add('active');
        }

        function closeInventory() {
            document.getElementById('inventoryModal').classList.remove('active');
        }

        function withdrawItem(index) {
            const item = playerData.items[index];
            if (confirm(`–í—ã–≤–µ—Å—Ç–∏ –ø—Ä–µ–¥–º–µ—Ç "${item}"?`)) {
                playerData.items.splice(index, 1);
                savePlayerData();
                updateUI();
                openInventory(); // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
                showNotification(`–ü—Ä–µ–¥–º–µ—Ç "${item}" –≤—ã–≤–µ–¥–µ–Ω!`);
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        document.getElementById('confirmBuyBtn').addEventListener('click', confirmPurchase);

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
        document.getElementById('adminToggle').addEventListener('click', function() {
            const adminPanel = document.getElementById('adminPanel');
            adminPanel.classList.toggle('active');
            
            if (adminPanel.classList.contains('active')) {
                this.innerHTML = '<span>üîß</span> –°–∫—Ä—ã—Ç—å –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å';
            } else {
                this.innerHTML = '<span>üîß</span> –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å';
            }
        });

        document.getElementById('adminApply').addEventListener('click', function() {
            const playerIdInput = document.getElementById('adminPlayerId').value;
            const starsInput = document.getElementById('adminStars').value;

            if (!playerIdInput || !starsInput) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ ID –∏–≥—Ä–æ–∫–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤—ë–∑–¥!');
                return;
            }

            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É
            // –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç–æ –≤—ã–¥–∞–µ–º –∑–≤–µ–∑–¥—ã —Ç–µ–∫—É—â–µ–º—É –∏–≥—Ä–æ–∫—É
            playerData.stars += parseInt(starsInput);
            savePlayerData();
            updateUI();
            
            showNotification(`–í—ã–¥–∞–Ω–æ ${starsInput} –∑–≤—ë–∑–¥ –∏–≥—Ä–æ–∫—É ${playerIdInput}`);
            
            // –û—á–∏—â–∞–µ–º –ø–æ–ª—è
            document.getElementById('adminPlayerId').value = '';
            document.getElementById('adminStars').value = '';
        });

        document.getElementById('adminReset').addEventListener('click', function() {
            const playerIdInput = document.getElementById('adminPlayerId').value;
            
            if (!playerIdInput) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ ID –∏–≥—Ä–æ–∫–∞ –¥–ª—è —Å–±—Ä–æ—Å–∞!');
                return;
            }

            if(confirm(`–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∏–≥—Ä–æ–∫–∞ ${playerIdInput}?`)) {
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
                playerData.hunger = 25;
                playerData.mood = 97;
                playerData.stars = 0;
                playerData.items = [];
                playerData.eggType = 'normal';
                playerData.foodCount = 3;
                playerData.isAlive = true;
                
                savePlayerData();
                updateUI();
                showNotification(`–ü—Ä–æ–≥—Ä–µ—Å—Å –∏–≥—Ä–æ–∫–∞ ${playerIdInput} —Å–±—Ä–æ—à–µ–Ω!`);
                
                // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ
                document.getElementById('adminPlayerId').value = '';
            }
        });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –∏—Ö
        document.getElementById('shopModal').addEventListener('click', function(e) {
            if (e.target === this) closeShop();
        });

        document.getElementById('confirmModal').addEventListener('click', function(e) {
            if (e.target === this) closeConfirm();
        });

        document.getElementById('inventoryModal').addEventListener('click', function(e) {
            if (e.target === this) closeInventory();
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        loadPlayerData();
    </script>
</body>
</html>
